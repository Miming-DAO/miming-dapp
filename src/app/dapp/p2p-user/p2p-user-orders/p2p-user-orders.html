<div class="max-w-7xl mx-auto">
  <div class="backdrop-blur-xl bg-slate-800/50 rounded-3xl border border-purple-500/20 p-4 md:p-8">
    <div class="mb-6">
      <h2 class="text-xl md:text-2xl font-bold text-white mb-1 md:mb-2">My Orders</h2>
      <p class="text-sm md:text-base text-slate-400">Track your P2P transactions</p>
    </div>

  @if (isLoading) {
  <div class="backdrop-blur-xl bg-slate-800/50 rounded-2xl border border-purple-500/20 p-8 text-center">
    <div class="inline-block w-10 h-10 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mb-3"></div>
    <p class="text-slate-400">Loading orders...</p>
  </div>
  }

  @if (!isLoading && orders.length === 0) {
  <div class="backdrop-blur-xl bg-slate-800/50 rounded-2xl border border-purple-500/20 p-8 text-center">
    <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-purple-500/10 flex items-center justify-center">
      <i class="pi pi-inbox text-3xl text-purple-400"></i>
    </div>
    <h3 class="text-lg font-semibold text-white mb-2">No Orders Yet</h3>
    <p class="text-slate-400 mb-4">You haven't placed any orders yet.</p>
    <button (click)="loadOrders()"
      class="px-5 py-2.5 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-medium hover:scale-105 transition-all duration-300 cursor-pointer">
      <i class="pi pi-refresh mr-2"></i>
      Refresh
    </button>
  </div>
  }

  @if (!isLoading && orders.length > 0) {
  <div class="space-y-3 md:space-y-4">
    @for (order of orders; track order.id) {
    <div (click)="onViewOrderDetails(order)"
      class="backdrop-blur-xl bg-gradient-to-br from-slate-800/80 via-purple-900/30 to-slate-800/90 rounded-2xl md:rounded-3xl border border-purple-500/20 shadow p-4 md:p-6 hover:border-purple-500/40 transition-all duration-300 hover:scale-[1.01] cursor-pointer relative overflow-hidden">
      <div
        class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-full blur-2xl">
      </div>

      <div class="relative z-10 flex flex-col md:grid md:grid-cols-12 gap-3 md:gap-4 md:items-center">
        <div class="md:col-span-3">
          <div class="text-xs md:text-sm text-slate-400 mb-1">Order ID</div>
          <div class="font-bold text-white text-sm md:text-base">{{ order.order_number || order.id }}</div>
          <div class="text-xs text-slate-400 mb-2">
            <span class="font-semibold text-white">{{ order.p2p_ad?.name }}</span>
            <div class="text-xs text-slate-400 mt-1">Ad #: <span class="font-mono">{{ order.p2p_ad?.p2p_number
                }}</span></div>
          </div>
          <span
            [class]="order.p2p_ad?.type === 'buy' ? 'bg-green-500/20 text-green-300 border-green-500/30' : 'bg-purple-500/20 text-purple-300 border-purple-500/30'"
            class="inline-block mt-1 px-2 py-0.5 rounded-full text-xs font-bold border uppercase">
            <i [class]="order.p2p_ad?.type === 'buy' ? 'pi pi-arrow-down' : 'pi pi-arrow-up'" class="mr-1"></i>
            {{ order.p2p_ad?.type }}
          </span>
        </div>

        <div class="md:col-span-2">
          <div class="text-xs md:text-sm text-slate-400 mb-1">Quantity</div>
          <div class="font-bold text-lg md:text-xl text-white">
            {{ formatNumber(order.quantity) }}
          </div>
          <div class="text-xs text-slate-500">USDT</div>
        </div>

        <div class="md:col-span-2">
          <div class="text-xs md:text-sm text-slate-400 mb-1">Total Amount</div>
          <div class="font-bold text-lg md:text-xl text-yellow-400">${{ formatNumber(order.amount) }}</div>
          <div class="text-xs text-slate-500">USD</div>
        </div>

        <div class="md:col-span-2">
          <div class="text-xs md:text-sm text-slate-400 mb-1">Created</div>
          <div class="text-sm md:text-base text-white">{{ order.created_at | date:'MMM d' }}</div>
          <div class="text-xs text-slate-500">{{ order.created_at | date:'h:mm a' }}</div>
        </div>

        <div class="md:col-span-2">
          <div class="text-xs md:text-sm text-slate-400 mb-1">Status</div>
          <span [class]="getStatusBadgeClass(order.status)"
            class="inline-block px-3 py-1.5 rounded-full text-xs font-semibold border uppercase">
            {{ order.status }}
          </span>
        </div>

        <div class="md:col-span-1 flex justify-end">
          <i class="pi pi-chevron-right text-purple-400 text-xl"></i>
        </div>
      </div>
    </div>
    }
  </div>
  }
  </div>

  <p-toast></p-toast>
</div>
