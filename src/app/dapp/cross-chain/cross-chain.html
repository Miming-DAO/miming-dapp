<!-- Header Section -->
<div class="backdrop-blur-md bg-slate-900/50 border-b border-purple-500/20">
  <div class="px-4 md:px-6 py-4 md:py-5 flex items-center justify-between">
    <div class="flex items-center gap-2 md:gap-4">
      <div
        class="w-8 h-8 md:w-10 md:h-10 rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center">
        <i class="pi pi-arrow-right-arrow-left text-white text-lg md:text-xl"></i>
      </div>
      <div>
        <h1 class="text-lg md:text-2xl font-bold text-white bg-clip-text text-transparent">
          Teleport
        </h1>
        <p class="text-xs text-slate-400 hidden sm:block">Transfer assets across chains</p>
      </div>
    </div>

    <div class="flex items-center gap-2 h-11">
      @if (!selectedPolkadotWalletAccount) {
      <button (click)="connectWallet()"
        class="px-6 py-2.5 h-11 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 hover:from-purple-600 hover:via-fuchsia-600 hover:to-pink-600 text-white font-semibold shadow-sm shadow-purple-500/20 transition-all duration-300 hover:scale-105 hover:shadow-md hover:shadow-purple-500/30 flex items-center gap-2 cursor-pointer">
        <i class="pi pi-wallet text-base"></i>
        <span>Connect</span>
      </button>
      }

      @if (selectedPolkadotWalletAccount) {
      <div
        class="group relative flex items-center gap-3 px-5 py-2 h-14 rounded-full bg-gradient-to-r from-slate-800/80 via-slate-700/80 to-slate-800/80 hover:from-purple-500/20 hover:via-fuchsia-500/20 hover:to-pink-500/20 transition-all duration-300 border border-slate-600/50 hover:border-purple-500/50 cursor-pointer shadow-lg shadow-slate-900/50 hover:shadow-purple-500/20 hover:scale-105"
        (click)="getPolkadotWalletAccount()">
        <div class="relative flex-shrink-0">
          <div
            class="absolute inset-0 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 opacity-0 group-hover:opacity-20 blur-md transition-opacity duration-300">
          </div>
          <app-polkadot-identicon-util [address]="selectedPolkadotWalletAccount.address"
            [size]="28"></app-polkadot-identicon-util>
          <span
            class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 border-2 border-slate-900 rounded-full animate-pulse shadow-sm shadow-green-400/50"></span>
        </div>

        <div class="flex flex-col min-w-0">
          <span
            class="text-sm font-bold text-white group-hover:bg-gradient-to-r group-hover:from-purple-400 group-hover:via-fuchsia-400 group-hover:to-pink-400 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-300 leading-tight">
            {{ selectedPolkadotWalletAccount.meta.name }}
          </span>
          <span
            class="hidden lg:block text-xs font-medium text-slate-400 group-hover:text-purple-300 transition-colors duration-300 leading-tight">
            {{ selectedPolkadotWalletAccount.address.slice(0, 6) }}...{{
            selectedPolkadotWalletAccount.address.slice(-4) }}
          </span>
        </div>

        <i
          class="pi pi-chevron-down text-xs text-slate-400 group-hover:text-purple-400 transition-all duration-300 group-hover:translate-y-0.5 flex-shrink-0"></i>
      </div>
      }
    </div>
  </div>
</div>

<!-- Cover Photo Section -->
<div class="w-full h-65 md:h-80 overflow-hidden bg-slate-900 relative">
  <img src="/images/backgrounds/miming-cover.png" alt="Cover" class="w-full h-full object-cover blur-[2px]"
    style="object-position: center center;" />
  <div class="absolute inset-x-0 bottom-0 h-20 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div>
</div>

<!-- Main Content Container -->
<div class="px-4 -mt-60 md:-mt-70 lg:-mt-70 sm:px-6 lg:px-8 pb-12">
  <div class="max-w-7xl mx-auto">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Left Side - Main Form -->
      <div class="lg:col-span-2">
        <div
          class="backdrop-blur-lg bg-gradient-to-br from-slate-800/80 via-purple-900/30 to-slate-800/90 rounded-3xl border-none p-6 md:p-8">
          <div class="space-y-6">

            <!-- Chain Selection Row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

              <!-- Source Chain -->
              <div class="space-y-2">
                <label class="block text-lg font-semibold text-white">
                  Source Chain
                </label>
                <p-select [options]="sourceChains" [(ngModel)]="selectedSourceChain" optionLabel="name"
                  class="w-full rounded-full" size="large" (onChange)="getTargetChains()">
                  <ng-template #selectedItem let-selectedOption>
                    @if (selectedOption) {
                    <div class="flex items-center gap-2 text-xl">
                      <img [src]="'images/chains/' + selectedOption.name.toLowerCase() + '.png'"
                        class="w-7 h-7 object-contain" />
                      <span class="font-medium text-white">{{ selectedOption.name }}</span>
                    </div>
                    }
                  </ng-template>
                  <ng-template let-chain #item>
                    <div class="flex items-center gap-2 transition-colors">
                      <img [src]="'images/chains/' + chain.name.toLowerCase() + '.png'"
                        class="w-6 h-6 object-contain" />
                      <span class="font-medium">{{ chain.name }}</span>
                    </div>
                  </ng-template>
                </p-select>
              </div>

              <!-- Target Chain -->
              <div class="space-y-2">
                <label class="block text-lg font-semibold text-white">
                  Target Chain
                </label>
                <p-select [options]="targetChains" [(ngModel)]="selectedTargetChain" optionLabel="name" class="w-full"
                  size="large" (onChange)="getTokens()">
                  <ng-template #selectedItem let-selectedOption>
                    @if (selectedOption) {
                    <div class="flex items-center gap-2 text-xl">
                      <img [src]="'images/chains/' + selectedOption.name.toLowerCase() + '.png'"
                        class="w-7 h-7 object-contain" />
                      <span class="font-medium text-white">{{ selectedOption.name }}</span>
                    </div>
                    }
                  </ng-template>
                  <ng-template let-chain #item>
                    <div class="flex items-center gap-2 transition-colors">
                      <img [src]="'images/chains/' + chain.name.toLowerCase() + '.png'"
                        class="w-6 h-6 object-contain" />
                      <span class="font-medium">{{ chain.name }}</span>
                    </div>
                  </ng-template>
                </p-select>
              </div>
            </div>

            <!-- Recipient Address -->
            <div class="space-y-2">
              <label class="block text-lg font-semibold text-white">
                {{ selectedTargetChain?.name || 'Target' }} Recipient Address
              </label>
              <div
                class="flex items-center gap-0 bg-slate-900/90 border-1 border-gray-100/30 rounded-full overflow-hidden hover:border-gray-100/40 transition-all h-14">
                <div class="py-3 pl-3 bg-slate-900/90 border-r-none border-gray-100/30 h-full flex items-center">
                  <img [src]="'images/chains/' + selectedTargetChain?.name?.toLowerCase() + '.png'"
                    class="w-7 h-7 object-contain" />
                </div>
                <input pInputText [(ngModel)]="recipientAddress" placeholder="Enter recipient address"
                  class="flex-1 bg-transparent text-white text-xl px-4 py-3 h-full"
                  style="border: none; border-radius: 0px; background-color: oklch(20.8% 0.042 265.755);" />
              </div>
            </div>

            <!-- Token and Quantity Row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label class="block text-lg font-semibold text-white">
                  Token
                </label>
                <p-select [options]="tokens" [(ngModel)]="selectedToken" optionLabel="name" class="w-full" size="large">
                  <ng-template #selectedItem let-selectedOption>
                    @if (selectedOption) {
                    <div class="flex items-center gap-2 text-xl">
                      <img [src]="'images/tokens/' + selectedOption.symbol.toLowerCase() + '.png'"
                        class="w-7 h-7 object-contain" />
                      <span class="font-medium text-white">{{ selectedOption.symbol }}</span>
                      <span class="text-slate-400 text-sm">({{ selectedOption.name }})</span>
                    </div>
                    }
                  </ng-template>
                  <ng-template let-token #item>
                    <div class="flex items-center gap-2 transition-colors">
                      <img [src]="'images/tokens/' + token.symbol.toLowerCase() + '.png'"
                        class="w-6 h-6 object-contain" />
                      <span class="font-medium">{{ token.symbol }}</span>
                      <span class="text-slate-400 text-sm">({{ token.name }})</span>
                    </div>
                  </ng-template>
                </p-select>
              </div>

              <!-- Quantity -->
              <div class="space-y-2">
                <label class="block text-lg font-semibold text-white">
                  Quantity
                </label>
                <p-inputnumber class="w-full bg-black rounded-full border border-gray-100/30 hover:border-gray-100/40"
                  inputStyleClass="w-full text-right font-bold text-2xl text-white border border-gray-100/30 px-4 py-3 hover:border-gray-100/40 transition-all"
                  size="large" mode="decimal" [minFractionDigits]="2" [maxFractionDigits]="selectedToken?.decimals"
                  [(ngModel)]="quantity" placeholder="0.00" />
              </div>
            </div>

            <!-- Asset Received Display -->
            <div class="space-y-2">
              <label class="block text-lg font-semibold text-white">
                Asset Received
              </label>
              <div
                class="flex items-center gap-0 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-full overflow-hidden shadow-lg shadow-yellow-500/20">
                <div class="px-6 py-4 flex items-center gap-2">
                  <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center overflow-hidden">
                    <img [src]="'images/tokens/' + selectedToken?.symbol?.toLowerCase() + '.png'"
                      class="w-7 h-7 object-contain" />
                  </div>
                  <span class="font-bold text-gray-900 text-xl">{{ selectedToken?.symbol || 'TOKEN' }}</span>
                </div>
                <div class="flex-1 bg-gradient-to-r from-yellow-400 to-yellow-500 px-6 py-4 text-right">
                  <span class="font-bold text-gray-900 text-2xl">
                    {{ quantity || 0 | number:'1.2-' + (selectedToken?.decimals || 2) }}
                  </span>
                </div>
              </div>
            </div>

            <!-- Info Note -->
            <div class="mt-6 p-4 rounded-3xl bg-purple-500/10 border border-purple-500/20">
              <div class="flex items-start gap-3">
                <i class="pi pi-info-circle text-purple-400 text-xl flex-shrink-0"></i>
                <div class="text-slate-300 text-sm leading-relaxed">
                  <p>
                    Network fee: <span class="text-yellow-400 font-semibold">0.01 USDT or DOT</span> per transaction to
                    Xode. This covers cross-chain validation and bridge operation costs.
                  </p>
                </div>
              </div>
            </div>

            <!-- Teleport Button -->
            <button (click)="teleport()" [disabled]="isProcessing"
              class="w-full py-5 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 hover:from-purple-600 hover:via-fuchsia-600 hover:to-pink-600 disabled:from-slate-600 disabled:via-slate-600 disabled:to-slate-600 text-white font-bold text-xl shadow-md shadow-purple-500/20 hover:shadow-lg hover:shadow-purple-500/30 transition-all duration-300 hover:scale-105 disabled:hover:scale-100 disabled:cursor-not-allowed disabled:shadow-none cursor-pointer flex items-center justify-center gap-3">
              <i class="pi pi-send text-2xl"></i>
              <span>Teleport Asset</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Right Side - Balance Panels -->
      <div class="lg:col-span-1">
        <div class="sticky top-4 space-y-4">
          <div
            class="backdrop-blur-lg bg-gradient-to-br from-slate-800/80 via-purple-900/30 to-slate-800/90 rounded-3xl border border-purple-500/20 p-6">
            <div class="flex items-center gap-3 mb-4">
              <div
                class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 flex items-center justify-center">
                <i class="pi pi-wallet text-white text-lg"></i>
              </div>
              <h3 class="text-lg font-bold text-white">Chain Balances</h3>
            </div>

            <div class="space-y-3">
              <!-- Selected Source Chain First -->
              @if (selectedSourceChain) {
              <div
                class="bg-gradient-to-br from-purple-900/40 to-pink-900/40 rounded-2xl p-4 border border-purple-500/30 hover:border-purple-500/50 transition-all">
                <div class="flex items-center justify-between mb-3">
                  <div class="flex items-center gap-2">
                    <img [src]="'images/chains/' + selectedSourceChain.name.toLowerCase() + '.png'"
                      class="w-5 h-5 object-contain" />
                    <span class="text-sm font-semibold text-white">{{ selectedSourceChain.name }}</span>
                    <span
                      class="px-2 py-0.5 text-xs font-bold bg-purple-500/30 text-purple-300 rounded-full">Active</span>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    @if (selectedToken) {
                    <img [src]="'images/tokens/' + selectedToken.symbol.toLowerCase() + '.png'"
                      class="w-6 h-6 object-contain" />
                    <span class="text-base font-bold text-white">{{ selectedToken.symbol }}</span>
                    } @else {
                    <span class="text-sm text-slate-400">Select Token</span>
                    }
                  </div>
                  <span class="text-xl font-bold text-white">0.00</span>
                </div>
              </div>

              <!-- Divider -->
              <div class="flex items-center gap-3 py-2">
                <div class="flex-1 h-px bg-gradient-to-r from-transparent via-purple-500/30 to-transparent"></div>
                <span class="text-xs text-slate-500 uppercase tracking-wider">Other Chains</span>
                <div class="flex-1 h-px bg-gradient-to-r from-transparent via-purple-500/30 to-transparent"></div>
              </div>
              }

              <!-- Rest of the Chains -->
              @for (chain of sourceChains; track chain.id) {
              @if (!selectedSourceChain || chain.id !== selectedSourceChain.id) {
              <div
                class="bg-slate-900/50 rounded-2xl p-4 border border-purple-500/10 hover:border-purple-500/30 transition-all">
                <div class="flex items-center justify-between mb-3">
                  <div class="flex items-center gap-2">
                    <img [src]="'images/chains/' + chain.name.toLowerCase() + '.png'" class="w-5 h-5 object-contain" />
                    <span class="text-sm font-semibold text-white">{{ chain.name }}</span>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    @if (selectedToken) {
                    <img [src]="'images/tokens/' + selectedToken.symbol.toLowerCase() + '.png'"
                      class="w-6 h-6 object-contain" />
                    <span class="text-base font-bold text-white">{{ selectedToken.symbol }}</span>
                    } @else {
                    <span class="text-sm text-slate-400">Select Token</span>
                    }
                  </div>
                  <span class="text-xl font-bold text-white">0.00</span>
                </div>
              </div>
              }
              }
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Available Wallets Dialog -->
<p-dialog [(visible)]="showAvailableWalletsDialog" [modal]="true"
  [style]="{ 'width': '30rem', 'border-radius': '1.5rem' }" styleClass="cosmic-dialog">
  <ng-template #header>
    <div class="flex items-center gap-3">
      <div
        class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 flex items-center justify-center">
        <i class="pi pi-wallet text-white text-lg"></i>
      </div>
      <span
        class="font-bold text-xl bg-gradient-to-r from-purple-400 via-fuchsia-400 to-pink-400 bg-clip-text text-transparent">
        Choose Wallet
      </span>
    </div>
  </ng-template>
  <div class="flex flex-col gap-3 py-4">
    <button
      class="w-full flex items-center gap-3 p-4 rounded-3xl bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600/30 hover:border-purple-500/50 transition-all duration-200 cursor-pointer group"
      (click)="connectPolkadotJsWallet()">
      <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center overflow-hidden">
        <img src="/images/wallets/polkadotjs.png" alt="PolkadotJS" class="w-8 h-8 object-contain" />
      </div>
      <span class="font-medium text-lg text-slate-200 group-hover:text-white transition-colors">PolkadotJS</span>
    </button>
    <button
      class="w-full flex items-center gap-3 p-4 rounded-3xl bg-slate-800/50 hover:bg-slate-700/50 border border-slate-600/30 hover:border-purple-500/50 transition-all duration-200 cursor-pointer group"
      (click)="connectTalismanWallet()">
      <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center overflow-hidden">
        <img src="/images/wallets/talisman.png" alt="Talisman Wallet" class="w-8 h-8 object-contain" />
      </div>
      <span class="font-medium text-lg text-slate-200 group-hover:text-white transition-colors">Talisman</span>
    </button>
  </div>
  <ng-template #footer>
    <button (click)="showAvailableWalletsDialog = false"
      class="w-full px-4 py-3 rounded-full bg-slate-700/50 hover:bg-slate-600/50 text-slate-200 hover:text-white font-medium transition-all duration-200 border border-slate-600/30 cursor-pointer">
      Cancel
    </button>
  </ng-template>
</p-dialog>

<!-- Polkadot Wallet Accounts Dialog -->
<p-dialog [(visible)]="showPolkadotWalletAccountsDialog" [modal]="true"
  [style]="{ 'width': '30rem', 'border-radius': '1.5rem' }" [dismissableMask]="true" styleClass="cosmic-dialog">
  <ng-template #header>
    <div class="flex items-center gap-3">
      <div
        class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 flex items-center justify-center">
        <i class="pi pi-user text-white text-lg"></i>
      </div>
      <span
        class="font-bold text-xl bg-gradient-to-r from-purple-400 via-fuchsia-400 to-pink-400 bg-clip-text text-transparent">
        Choose Account
      </span>
    </div>
  </ng-template>
  <div class="flex flex-col gap-3 py-4">
    @for (account of polkadotWalletAccounts; track account.address) {
    <div class="p-4 rounded-3xl flex items-center gap-3 cursor-pointer transition-all duration-200 border"
      [class.bg-slate-800/50]="selectedPolkadotWalletAccount?.address !== account.address"
      [class.hover:bg-slate-700/50]="selectedPolkadotWalletAccount?.address !== account.address"
      [class.border-slate-600/30]="selectedPolkadotWalletAccount?.address !== account.address"
      [class.hover:border-purple-500/50]="selectedPolkadotWalletAccount?.address !== account.address"
      [class.bg-gradient-to-r]="selectedPolkadotWalletAccount?.address === account.address"
      [class.from-purple-500/20]="selectedPolkadotWalletAccount?.address === account.address"
      [class.via-fuchsia-500/20]="selectedPolkadotWalletAccount?.address === account.address"
      [class.to-pink-500/20]="selectedPolkadotWalletAccount?.address === account.address"
      [class.border-purple-500/50]="selectedPolkadotWalletAccount?.address === account.address"
      (click)="selectedPolkadotWalletAccount = account">
      <app-polkadot-identicon-util [address]="account.address" [size]="40"></app-polkadot-identicon-util>
      <div class="flex flex-col">
        <span class="font-bold text-lg text-white">{{ account.meta.name }}</span>
        <span class="text-sm text-slate-400">
          {{ account.address.slice(0, 5) }}...{{ account.address.slice(-5) }}
        </span>
      </div>
    </div>
    }
  </div>
  <ng-template #footer>
    <div class="flex gap-2 pt-5">
      <button [disabled]="!selectedPolkadotWalletAccount || isProcessing" (click)="connectPolkadotWalletAccount()"
        class="flex-1 px-4 py-3 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 hover:from-purple-600 hover:via-fuchsia-600 hover:to-pink-600 disabled:from-slate-600 disabled:via-slate-600 disabled:to-slate-600 text-white font-semibold transition-all duration-200 border-0 cursor-pointer disabled:cursor-not-allowed flex items-center justify-center gap-2">
        <i class="pi pi-check"></i>
        <span>Connect</span>
      </button>
      <button (click)="showPolkadotWalletAccountsDialog = false"
        class="flex-1 px-4 py-3 rounded-full bg-slate-700/50 hover:bg-slate-600/50 text-slate-200 hover:text-white font-medium transition-all duration-200 border border-slate-600/30 cursor-pointer">
        Cancel
      </button>
    </div>
  </ng-template>
</p-dialog>

<!-- Polkadot Wallet Account Details Dialog -->
<p-dialog [(visible)]="showPolkadotWalletAccountDialog" [modal]="true"
  [style]="{ 'width': '30rem', 'border-radius': '1.5rem' }" [dismissableMask]="true" styleClass="cosmic-dialog">
  <ng-template #header>
    <div class="flex items-center gap-3">
      <div
        class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 flex items-center justify-center">
        <i class="pi pi-id-card text-white text-lg"></i>
      </div>
      <span
        class="font-bold text-xl bg-gradient-to-r from-purple-400 via-fuchsia-400 to-pink-400 bg-clip-text text-transparent">Account
        Details</span>
    </div>
  </ng-template>
  <div class="flex flex-col gap-3 py-4">
    <div class="p-4 rounded-3xl flex items-center gap-3 bg-slate-800/50 border border-slate-600/30">
      <app-polkadot-identicon-util [address]="selectedPolkadotWalletAccount?.address || ''" [size]="48">
      </app-polkadot-identicon-util>
      <div class="flex flex-col flex-1">
        <span class="font-bold text-lg text-white">{{ selectedPolkadotWalletAccount?.meta?.name }}</span>
        <div class="flex items-center gap-2">
          <span class="text-sm text-slate-400">
            {{ selectedPolkadotWalletAccount?.address?.slice(0, 5) }}...
            {{ selectedPolkadotWalletAccount?.address?.slice(-5) }}
          </span>
          <button (click)="copyAddressToClipboard(selectedPolkadotWalletAccount?.address)"
            class="w-7 h-7 flex items-center justify-center rounded-lg hover:bg-white/10 text-slate-400 hover:text-purple-400 transition-all duration-200 cursor-pointer"
            pTooltip="Copy Address" tooltipPosition="bottom">
            <i class="pi pi-copy text-sm"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
  <ng-template #footer>
    <div class="flex gap-2 pt-5">
      <button (click)="logoutPolkadotWalletAccount()" [disabled]="isProcessing"
        class="flex-1 px-4 py-3 rounded-full bg-red-500/20 hover:bg-red-500/30 disabled:bg-slate-600/20 text-red-400 hover:text-red-300 disabled:text-slate-500 font-semibold transition-all duration-200 border border-red-500/30 hover:border-red-500/50 disabled:border-slate-600/20 cursor-pointer disabled:cursor-not-allowed flex items-center justify-center gap-2">
        <i class="pi pi-sign-out"></i>
        <span>Logout</span>
      </button>
      <button (click)="showPolkadotWalletAccountDialog = false"
        class="flex-1 px-4 py-3 rounded-full bg-slate-700/50 hover:bg-slate-600/50 text-slate-200 hover:text-white font-medium transition-all duration-200 border border-slate-600/30 cursor-pointer">
        Close
      </button>
    </div>
  </ng-template>
</p-dialog>

<!-- Initializing and Processing Dialogs -->
<p-dialog [(visible)]="showInitializingDialog" [modal]="true" [style]="{ 'width': '30rem', 'border-radius': '1.5rem' }"
  [dismissableMask]="false" [closable]="false" [draggable]="false" [resizable]="false" styleClass="cosmic-dialog">
  <ng-template pTemplate="header">
    <div class="w-full text-center py-2">
      <div class="flex items-center justify-center gap-3 mb-2">
        <div
          class="w-20 h-20 rounded-full bg-gradient-to-r from-yellow-400 to-yellow-500 flex items-center justify-center overflow-hidden">
          <img src="/images/logos/miming-logo.png" alt="MIMING" class="w-18 h-18 object-contain" />
        </div>
      </div>
    </div>
  </ng-template>

  <div class="py-6">
    <div class="flex flex-col items-center text-center">
      <div class="relative mb-6">
        <div
          class="w-20 h-20 rounded-full bg-gradient-to-r from-purple-500/20 to-pink-500/20 blur-xl absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
        </div>
        <p-progressSpinner strokeWidth="5" class="w-16 h-16"
          [style]="{ 'color': 'rgb(168, 85, 247)' }"></p-progressSpinner>
      </div>
      <div class="w-full">
        <div class="p-4 rounded-3xl bg-slate-800/50 border border-purple-500/20">
          <h3 class="text-xl font-semibold text-white mt-0 mb-3">Loading...</h3>
          <p class="text-slate-400 text-sm leading-relaxed m-0">Please wait while we get things ready.</p>
        </div>
      </div>
    </div>
  </div>
</p-dialog>

<!-- Processing Dialog -->
<p-dialog [(visible)]="showProcessingDialog" [modal]="true" [style]="{ 'width': '30rem', 'border-radius': '1.5rem' }"
  [dismissableMask]="false" [closable]="false" [draggable]="false" [resizable]="false" styleClass="cosmic-dialog">
  <ng-template pTemplate="header">
    <div class="w-full text-center py-2">
      <div class="flex items-center justify-center gap-3 mb-2">
        <div
          class="w-20 h-20 rounded-full bg-gradient-to-r from-yellow-400 to-yellow-500 flex items-center justify-center overflow-hidden">
          <img src="/images/logos/miming-logo.png" alt="MIMING" class="w-18 h-18 object-contain" />
        </div>
      </div>
    </div>
  </ng-template>

  <div class="py-6">
    @if (processingStatus.status === "In-Progress") {
    <div class="flex flex-col items-center text-center">
      <div class="relative mb-6">
        <div
          class="w-20 h-20 rounded-full bg-gradient-to-r from-purple-500/20 to-pink-500/20 blur-xl absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 animate-pulse">
        </div>
        <p-progressSpinner strokeWidth="5" class="w-16 h-16"
          [style]="{ 'color': 'rgb(168, 85, 247)' }"></p-progressSpinner>
      </div>
      <div class="w-full">
        <div class="p-4 rounded-3xl bg-slate-800/50 border border-purple-500/20">
          <h3 class="text-xl font-semibold text-white mt-0 mb-3">{{ processingStatus.message }}</h3>
          <p class="text-slate-400 text-sm leading-relaxed m-0">{{ processingStatus.details }}</p>
        </div>
      </div>
    </div>
    }
    @else if (processingStatus.status === "Error") {
    <div class="flex flex-col items-center text-center">
      <div class="relative mb-6">
        <div
          class="w-20 h-20 rounded-full bg-gradient-to-r from-red-500/20 to-red-600/20 blur-xl absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
        </div>
        <i class="pi pi-exclamation-triangle text-red-500" style="font-size: 50px;"></i>
      </div>
      <div class="w-full">
        <div class="p-4 rounded-3xl bg-red-500/10 border border-red-500/30">
          <h3 class="text-xl font-semibold text-red-400 mt-0 mb-3">{{ processingStatus.message }}</h3>
          <p class="text-slate-400 text-sm leading-relaxed m-0">{{ processingStatus.details }}</p>
        </div>
      </div>
    </div>
    }
    @else if (processingStatus.status === "Completed") {
    <div class="flex flex-col items-center text-center">
      <div class="relative mb-6">
        <div
          class="w-20 h-20 rounded-full bg-gradient-to-r from-green-500/20 to-green-600/20 blur-xl absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
        </div>
        <i class="pi pi-check-circle text-green-500" style="font-size: 50px;"></i>
      </div>
      <div class="w-full">
        <div class="p-4 rounded-3xl bg-green-500/10 border border-green-500/30">
          <h3 class="text-xl font-semibold text-green-400 mt-0 mb-3">{{ processingStatus.message }}</h3>
          <p class="text-slate-400 text-sm leading-relaxed m-0">{{ processingStatus.details }}</p>
        </div>
      </div>
    </div>
    }
  </div>
  <ng-template pTemplate="footer">
    <div class="flex gap-2 pt-5">
      @if (processingStatus.status !== 'In-Progress') {
      <button (click)="retryTransaction()"
        class="flex-1 px-4 py-3 rounded-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 hover:from-purple-600 hover:via-fuchsia-600 hover:to-pink-600 text-white font-semibold shadow-sm shadow-purple-500/20 transition-all duration-300 hover:scale-105 hover:shadow-md hover:shadow-purple-500/30 cursor-pointer flex items-center justify-center gap-2">
        <i class="pi pi-refresh"></i>
        <span>Retry</span>
      </button>
      }
      <button (click)="closeProcessingDialog()"
        class="flex-1 px-4 py-3 rounded-full bg-slate-700/50 hover:bg-slate-600/50 text-slate-200 hover:text-white font-medium transition-all duration-200 border border-slate-600/30 cursor-pointer">
        Close
      </button>
    </div>
  </ng-template>
</p-dialog>

<p-confirmDialog [style]="{ width: '450px' }" />
<p-toast />
